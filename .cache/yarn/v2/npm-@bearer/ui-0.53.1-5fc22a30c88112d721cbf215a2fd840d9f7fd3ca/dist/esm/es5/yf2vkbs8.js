/*! Built with http://stenciljs.com */
import{h}from"./bearer-ui.core.js";import{b as Bearer,c as StateManager}from"./chunk-567c07cb.js";import{a as FieldSet}from"./chunk-69ed7b92.js";var OAuth2SetupType=[{type:"text",label:"Client ID",controlName:"clientId",required:!0},{type:"password",label:"Client Secret",controlName:"clientSecret",required:!0}],EmailSetupType=[{type:"email",label:"Email",controlName:"email",required:!0},{type:"password",label:"Password",controlName:"password",required:!0}],KeySetupType=[{type:"text",label:"Enter your Key",controlName:"key",required:!0}],BearerSetup=function(){function e(){var e=this;this.fields=[],this.error=!1,this.loading=!1,this.handleSubmit=function(t){t.preventDefault(),e.loading=!0;var r=e.fieldSet.map(function(e){return{key:e.controlName,value:e.value}});StateManager.storeSetup(r.reduce(function(e,t){var r;return Object.assign({},e,((r={})[t.key]=t.value,r))},{})).then(function(t){e.loading=!1;var r=t.Item.referenceId;console.log("[BEARER]","setup_success","setup_success:"+e.scenarioId),Bearer.emitter.emit("setup_success:"+e.scenarioId,{referenceId:r}),e.setupSuccess.emit({referenceId:r})}).catch(function(){e.error=!0,e.loading=!1,Bearer.emitter.emit("setup_error:"+e.scenarioId,{})})}}return e.prototype.componentWillLoad=function(){if("string"==typeof this.fields)switch(this.fields){case"email":this.fieldSet=new FieldSet(EmailSetupType);break;case"type":this.fieldSet=new FieldSet(KeySetupType);break;case"oauth2":default:this.fieldSet=new FieldSet(OAuth2SetupType)}else this.fieldSet=new FieldSet(this.fields)},e.prototype.render=function(){return[this.error&&h("bearer-alert",{kind:"danger"},"[Error] Unable to store the credentials"),this.loading?h("bearer-loading",null):h("bearer-form",{fields:this.fieldSet,clearOnInput:!0,onSubmit:this.handleSubmit})]},Object.defineProperty(e,"is",{get:function(){return"bearer-setup"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"encapsulation",{get:function(){return"shadow"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"properties",{get:function(){return{element:{elementRef:!0},error:{state:!0},fields:{type:String,attr:"fields"},fieldSet:{state:!0},loading:{state:!0},referenceId:{type:String,attr:"reference-id"},scenarioId:{type:String,attr:"scenario-id"}}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"events",{get:function(){return[{name:"setupSuccess",method:"setupSuccess",bubbles:!0,cancelable:!0,composed:!0}]},enumerable:!0,configurable:!0}),Object.defineProperty(e,"style",{get:function(){return""},enumerable:!0,configurable:!0}),e}();export{BearerSetup};