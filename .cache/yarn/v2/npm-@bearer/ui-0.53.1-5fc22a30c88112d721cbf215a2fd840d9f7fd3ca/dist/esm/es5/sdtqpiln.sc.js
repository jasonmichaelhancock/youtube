/*! Built with http://stenciljs.com */
import{h}from"./bearer-ui.core.js";import{b as Bearer,c as StateManager}from"./chunk-567c07cb.js";import{a as FieldSet}from"./chunk-69ed7b92.js";var BearerConfig=function(){function e(){var e=this;this.fields=[],this.error=!1,this.loading=!1,this.handleSubmit=function(r){r.preventDefault(),e.loading=!0;var t=e.fieldSet.map(function(e){return{key:e.controlName,value:e.value}});StateManager.storeSetup(t.reduce(function(e,r){var t;return Object.assign({},e,((t={})[r.key]=r.value,t))},{})).then(function(r){e.loading=!1,console.log(""+e.scenarioId),Bearer.emitter.emit("config_success:"+e.scenarioId,{referenceID:r.Item.referenceId})}).catch(function(){e.error=!0,e.loading=!1,Bearer.emitter.emit("config_error:"+e.scenarioId,{})})}}return e.prototype.componentWillLoad=function(){this.fieldSet=new FieldSet(this.fields)},e.prototype.render=function(){return[this.error&&h("bearer-alert",{kind:"danger"},"[Error] Unable to store the credentials"),this.loading?h("bearer-loading",null):h("bearer-form",{fields:this.fieldSet,clearOnInput:!0,onSubmit:this.handleSubmit})]},Object.defineProperty(e,"is",{get:function(){return"bearer-config"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"encapsulation",{get:function(){return"shadow"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"properties",{get:function(){return{element:{elementRef:!0},error:{state:!0},fields:{type:String,attr:"fields"},fieldSet:{state:!0},loading:{state:!0},referenceId:{type:String,attr:"reference-id"},scenarioId:{type:String,attr:"scenario-id"}}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"events",{get:function(){return[{name:"stepCompleted",method:"stepCompleted",bubbles:!0,cancelable:!0,composed:!0}]},enumerable:!0,configurable:!0}),Object.defineProperty(e,"style",{get:function(){return""},enumerable:!0,configurable:!0}),e}();export{BearerConfig};