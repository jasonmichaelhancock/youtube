/*! Built with http://stenciljs.com */
const{h:e}=window.BearerUi;import"./chunk-567c07cb.js";class t{constructor(){this.perPage=5,this.hasMore=!0,this.page=1,this.fetching=!1,this.collection=[],this._renderCollection=(()=>this.fetching&&!this.collection.length?null:(this.renderCollection||this.renderCollectionDefault)(this.collection)),this.renderCollectionDefault=(t=>e("bearer-navigator-collection",Object.assign({},this.rendererProps,{data:t}))),this._renderFetching=(()=>this.renderFetching?this.renderFetching():e("bearer-loading",null)),this.onScroll=(()=>{this.fetching||this.content.scrollTop+this.content.clientHeight>=this.content.scrollHeight&&this.fetchNext()})}fetchNext(){this.hasMore&&(this.fetching=!0,this.fetcher({page:this.page}).then(({data:e})=>(console.log("[BEARER]","data receiced from fetcher",e),this.hasMore=e.length===this.perPage,this.collection=[...this.collection,...e],this.fetching=!1,this.page=this.page+1,e)).catch(e=>{console.error("[BEARER]","Error while fetching",e),this.fetching=!1}))}componentDidLoad(){this.element&&(this.content=this.element.querySelector(".scrollable-list"),this.content.addEventListener("scroll",this.onScroll),this.fetchNext())}reset(){this.hasMore=!0,this.collection=[],this.fetchNext()}render(){return e("div",{class:"scrollable-list"},this._renderCollection(),this.fetching&&this._renderFetching())}static get is(){return"bearer-scrollable"}static get properties(){return{collection:{state:!0},content:{state:!0},element:{elementRef:!0},fetcher:{type:"Any",attr:"fetcher"},fetching:{state:!0},hasMore:{state:!0},page:{state:!0},perPage:{type:Number,attr:"per-page"},renderCollection:{type:"Any",attr:"render-collection"},rendererProps:{type:"Any",attr:"renderer-props"},renderFetching:{type:"Any",attr:"render-fetching"},reset:{method:!0}}}static get listeners(){return[{name:"BearerScrollableNext",method:"fetchNext"}]}static get style(){return".scrollable-list{height:300px;overflow-x:hidden;overflow-y:scroll}.scrollable-list::-webkit-scrollbar{display:none}"}}export{t as BearerScrollable};