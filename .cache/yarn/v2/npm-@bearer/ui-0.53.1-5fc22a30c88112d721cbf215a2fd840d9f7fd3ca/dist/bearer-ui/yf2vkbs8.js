/*! Built with http://stenciljs.com */
const{h:e}=window.BearerUi;import{b as t,c as r}from"./chunk-567c07cb.js";import{a as s}from"./chunk-69ed7b92.js";const i=[{type:"text",label:"Client ID",controlName:"clientId",required:!0},{type:"password",label:"Client Secret",controlName:"clientSecret",required:!0}],a=[{type:"email",label:"Email",controlName:"email",required:!0},{type:"password",label:"Password",controlName:"password",required:!0}],l=[{type:"text",label:"Enter your Key",controlName:"key",required:!0}];class n{constructor(){this.fields=[],this.error=!1,this.loading=!1,this.handleSubmit=(e=>{e.preventDefault(),this.loading=!0;const s=this.fieldSet.map(e=>({key:e.controlName,value:e.value}));r.storeSetup(s.reduce((e,t)=>Object.assign({},e,{[t.key]:t.value}),{})).then(e=>{this.loading=!1;const r=e.Item.referenceId;console.log("[BEARER]","setup_success",`setup_success:${this.scenarioId}`),t.emitter.emit(`setup_success:${this.scenarioId}`,{referenceId:r}),this.setupSuccess.emit({referenceId:r})}).catch(()=>{this.error=!0,this.loading=!1,t.emitter.emit(`setup_error:${this.scenarioId}`,{})})})}componentWillLoad(){if("string"==typeof this.fields)switch(this.fields){case"email":this.fieldSet=new s(a);break;case"type":this.fieldSet=new s(l);break;case"oauth2":default:this.fieldSet=new s(i)}else this.fieldSet=new s(this.fields)}render(){return[this.error&&e("bearer-alert",{kind:"danger"},"[Error] Unable to store the credentials"),this.loading?e("bearer-loading",null):e("bearer-form",{fields:this.fieldSet,clearOnInput:!0,onSubmit:this.handleSubmit})]}static get is(){return"bearer-setup"}static get encapsulation(){return"shadow"}static get properties(){return{element:{elementRef:!0},error:{state:!0},fields:{type:String,attr:"fields"},fieldSet:{state:!0},loading:{state:!0},referenceId:{type:String,attr:"reference-id"},scenarioId:{type:String,attr:"scenario-id"}}}static get events(){return[{name:"setupSuccess",method:"setupSuccess",bubbles:!0,cancelable:!0,composed:!0}]}static get style(){return""}}export{n as BearerSetup};